<h1>Welcome!</h1>
<p><h3>Buongiornissimo! Qui puoi cercare località.</h3></p>
<%= form_tag("/welcome/results", method: :get) do %>
  <%= label_tag(:city, "Inserisci la città:") %>
  <%= text_field_tag(:city) %>
  <%= select_tag :categories, options_for_select([["Mattina", "Mattina"], ["Pomeriggio", "Pomeriggio"], ["Sera", "Sera"]]), :include_blank => "Seleziona una o più categorie", :multiple => true %>
  <%= submit_tag("Search") %>
<% end %>

<script>
function initAutocomplete() {


  // Create the search box and link it to the UI element.
  var input = document.getElementById('city');
  var searchBox = new google.maps.places.SearchBox(input);
  map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

  // Bias the SearchBox results towards current map's viewport.
  map.addListener('bounds_changed', function() {
    searchBox.setBounds(map.getBounds());
  });

  // Listen for the event fired when the user selects a prediction and retrieve
  // more details for that place.
  searchBox.addListener('places_changed', function() {
    var places = searchBox.getPlaces();

    if (places.length == 0) {
      return;
    }


  });
}

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCQIh8MGEehUptz2u7vr8JbRvyvB6mA4M8&libraries=places&callback=initAutocomplete"
   async defer></script>
