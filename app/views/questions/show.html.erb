<h3>Domande su: <%= @question.property.titolo %></h3>

<p>
<strong>Utente:</strong>
<% if @question.user.provider != nil %>
  <%= @question.user.name %>
<% else %>
  <%= @question.user.username %>
<% end %>
</p>
<p>
<strong>Testo:</strong>
<%= @question.body %>
</p>

<%= link_to 'Indietro', property_path(@property) %>

<hr><h2>Risposte</h2>
<% @question.answers.each do |answer| %>
  <p>
    <strong>• </strong>
    <% if current_user.provider == nil %>
        <%= answer.user.username %>
    <% else %>
        <%= answer.user.name %>
    <% end %>
    <br>
    <strong>- </strong><%= answer.body %>
    <br>
    <% if current_user == @question.user %>
      <%= link_to 'Elimina', [answer.question.property, answer.question, answer],
               method: :delete,
               data: { confirm: 'Sei sicuro?' } %>
    <% end %>
  </p>
<% end %>

<% if current_user != nil %>
  <h2>Aggiungi una risposta:</h2>
  <%= form_for([@property, @question, @question.answers.build]) do |f| %>
    <p>
      <%= f.text_area :body %>
    </p>
    <p>
      <%= f.submit "Invia" %>
    </p>
  <% end %>
<% end %>
